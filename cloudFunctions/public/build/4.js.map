{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { SharedModule } from '../../shared/shared.module'\nimport { LoginPage } from './login';\nimport { FirebaseService } from '../../shared/services/firebase.service';\n\n@NgModule({\n   imports: [\n      SharedModule,\n      IonicPageModule.forChild(LoginPage),\n   ],\n   declarations: [\n      LoginPage\n   ],\n   entryComponents: [],\n   providers: [\n      FirebaseService\n   ]\n})\nexport class LoginModule {\n   constructor() {\n      console.log('LoginModule constructor');\n   }\n}\n\n/*https://events-12be3.firebaseapp.com/__/auth/handler */\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { NavController, IonicPage } from 'ionic-angular';\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\n\nimport { GlobalService } from '../../shared/services/global.service';\nimport { AuthService } from '../../shared/core/auth.service';\nimport { ApplicationService } from '../../shared/services/application.service';\nimport { FirebaseService } from '../../shared/services/firebase.service';\n\n\n@IonicPage()\n@Component({\n   selector: 'page-login',\n   templateUrl: 'login.html'\n})\nexport class LoginPage implements OnInit, OnDestroy {\n   loginMode: string = \"signIn\"\n   username:string\n   displayName: string\n   email: string;\n   password: string;\n   todo: FormGroup;\n\n   constructor(\n      private globalSrv: GlobalService,\n      private appSrv: ApplicationService,\n      private navCtrl: NavController,\n      private authSrv: AuthService,\n      private formBuilder: FormBuilder,\n      private fs: FirebaseService\n   ) {\n      console.log('LoginPage constructor');\n      this.todo = this.formBuilder.group({\n         fcn_email: ['', [Validators.required]],\n         fcn_password: ['', [Validators.required]]\n      });\n   }\n   ngOnDestroy() {\n      console.warn('HomePage destroy')\n   }\n   ngOnInit() {\n      console.log('LoginPage init');\n      // this.globalSrv.get('user').subscribe(data =>\n      //   this.go(data)\n      // );\n\n      // this.authSrv.verifyLoggedIn().subscribe(data => {\n      //    if (data) {\n      //       var o = {\n      //          username: data.displayName,\n      //          email: data.email,\n      //          photoURL: data.photoURL\n      //       };\n      //       this.globalSrv.save('user', o);\n      //       this.navCtrl.setRoot('HomePage', data);\n      //    }\n      // });\n   }\n   register(): void {\n      this.authSrv.registerUser(this.email, this.password).then((res) => {\n         if (!res) {\n            this.appSrv.message('Error', 'Usuario ya registrado!')\n            return\n         }            \n         const usr = {\n            email: this.email,\n            displayName: this.username,\n            photoURL:'assets/imgs/person.png',\n            uid: this.getUid(this.email)\n         }\n         this.fs.addUser(usr).then(x =>{\n            this.loginMode = 'signIn'\n            this.appSrv.message('Atencion', 'Usuario registrado OK!')\n         })\n      })\n   }\n   signin() {\n      this.authSrv.signInUser(this.email, this.password).then(data => {\n         if (data === undefined)\n            this.appSrv.message('Error', 'Usuario o contraseÃ±a no valida!')\n         else{\n            const usr = {\n               email: data.email,\n               displayName: data.displayName,\n               photoURL:'assets/imgs/person.png',\n               uid: this.getUid(data.email)\n            }\n            this.globalSrv.save('user', usr)\n            this.navCtrl.setRoot('HomePage')\n         }\n      }).catch(err => {\n         this.appSrv.message('Error', 'Falla en la autenticacion!')\n      });\n   }\n   loginGoogle() {\n      this.authSrv.loginGoogle().then(x => {\n         this.fs.updateUser(x)\n         this.navCtrl.push('HomePage')\n      })\n   }\n   loginFacebook() {\n      this.authSrv.loginFacebook().then(x => {\n         this.fs.updateUser(x)\n         this.navCtrl.push('HomePage')\n      })\n   }\n\n\n\n   private getUid(str){\n      const res = str.replace(/\\./gi, '')\n      return res\n   }\n   private initUser(data) {\n      this.globalSrv.save('user', data);\n      this.go(data);\n   }\n   private go(data) {\n      if (data)\n         this.navCtrl.setRoot('HomePage', data);\n   }\n}\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}